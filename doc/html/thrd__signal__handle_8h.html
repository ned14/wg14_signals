<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>WG14 modern signals: include/wg14_signals/thrd_signal_handle.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">WG14 modern signals
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('thrd__signal__handle_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">thrd_signal_handle.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="config_8h_source.html">config.h</a>&quot;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for thrd_signal_handle.h:</div>
<div class="dyncontent">
<div class="center"><img src="thrd__signal__handle_8h__incl.png" border="0" usemap="#ainclude_2wg14__signals_2thrd__signal__handle_8h" alt=""/></div>
<map name="ainclude_2wg14__signals_2thrd__signal__handle_8h" id="ainclude_2wg14__signals_2thrd__signal__handle_8h">
<area shape="rect" title=" " alt="" coords="109,5,271,45"/>
<area shape="rect" href="config_8h.html" title=" " alt="" coords="5,93,79,119"/>
<area shape="poly" title=" " alt="" coords="156,48,77,89,75,84,153,43"/>
<area shape="rect" title=" " alt="" coords="103,93,176,119"/>
<area shape="poly" title=" " alt="" coords="180,47,157,83,152,80,175,44"/>
<area shape="rect" title=" " alt="" coords="201,93,283,119"/>
<area shape="poly" title=" " alt="" coords="205,44,229,80,224,83,200,47"/>
<area shape="rect" title=" " alt="" coords="308,93,379,119"/>
<area shape="poly" title=" " alt="" coords="228,43,310,85,308,89,226,48"/>
<area shape="rect" title=" " alt="" coords="9,167,75,192"/>
<area shape="poly" title=" " alt="" coords="45,119,45,153,39,153,39,119"/>
</map>
</div>
</div>
<p><a href="thrd__signal__handle_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">union &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="unionthrd__raised__signal__info__value.html">thrd_raised_signal_info_value</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">User defined value.  <a href="unionthrd__raised__signal__info__value.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structthrd__raised__signal__info.html">thrd_raised_signal_info</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A platform independent subset of <code>siginfo_t</code>.  <a href="structthrd__raised__signal__info.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ab2e00b715ed9675faa57179d7502f5ab" id="r_ab2e00b715ed9675faa57179d7502f5ab"><td class="memItemLeft" align="right" valign="top">typedef int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thrd__signal__handle_8h.html#ab2e00b715ed9675faa57179d7502f5ab">thrd_raised_signal_error_code_t</a></td></tr>
<tr class="memdesc:ab2e00b715ed9675faa57179d7502f5ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Typedef to a system specific error code type.  <br /></td></tr>
<tr class="separator:ab2e00b715ed9675faa57179d7502f5ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af73bf2bd205323f686362faec8b219de" id="r_af73bf2bd205323f686362faec8b219de"><td class="memItemLeft" align="right" valign="top">typedef union <a class="el" href="unionthrd__raised__signal__info__value.html">thrd_raised_signal_info_value</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thrd__signal__handle_8h.html#af73bf2bd205323f686362faec8b219de">thrd_signal_func_t</a>) (union <a class="el" href="unionthrd__raised__signal__info__value.html">thrd_raised_signal_info_value</a>)</td></tr>
<tr class="memdesc:af73bf2bd205323f686362faec8b219de"><td class="mdescLeft">&#160;</td><td class="mdescRight">The type of the guarded function.  <br /></td></tr>
<tr class="separator:af73bf2bd205323f686362faec8b219de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad30c0cc3cb61d6cfd75559cf9bdfdc84" id="r_ad30c0cc3cb61d6cfd75559cf9bdfdc84"><td class="memItemLeft" align="right" valign="top">typedef union <a class="el" href="unionthrd__raised__signal__info__value.html">thrd_raised_signal_info_value</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thrd__signal__handle_8h.html#ad30c0cc3cb61d6cfd75559cf9bdfdc84">thrd_signal_recover_t</a>) (const struct <a class="el" href="structthrd__raised__signal__info.html">thrd_raised_signal_info</a> *)</td></tr>
<tr class="memdesc:ad30c0cc3cb61d6cfd75559cf9bdfdc84"><td class="mdescLeft">&#160;</td><td class="mdescRight">The type of the function called to recover from a signal being raised in a guarded section.  <br /></td></tr>
<tr class="separator:ad30c0cc3cb61d6cfd75559cf9bdfdc84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa942e37a598d563c1ca7568f9ab36e7d" id="r_aa942e37a598d563c1ca7568f9ab36e7d"><td class="memItemLeft" align="right" valign="top">typedef bool(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thrd__signal__handle_8h.html#aa942e37a598d563c1ca7568f9ab36e7d">thrd_signal_decide_t</a>) (struct <a class="el" href="structthrd__raised__signal__info.html">thrd_raised_signal_info</a> *)</td></tr>
<tr class="memdesc:aa942e37a598d563c1ca7568f9ab36e7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The type of the function called when a signal is raised. Returns true to continue guarded code, false to recover.  <br /></td></tr>
<tr class="separator:aa942e37a598d563c1ca7568f9ab36e7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7383ad2fc75d4ecc2243447bc6cd9318" id="r_a7383ad2fc75d4ecc2243447bc6cd9318"><td class="memItemLeft" align="right" valign="top">union <a class="el" href="unionthrd__raised__signal__info__value.html">thrd_raised_signal_info_value</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thrd__signal__handle_8h.html#a7383ad2fc75d4ecc2243447bc6cd9318">thrd_signal_invoke</a> (const sigset_t *signals, <a class="el" href="thrd__signal__handle_8h.html#af73bf2bd205323f686362faec8b219de">thrd_signal_func_t</a> guarded, <a class="el" href="thrd__signal__handle_8h.html#ad30c0cc3cb61d6cfd75559cf9bdfdc84">thrd_signal_recover_t</a> recovery, <a class="el" href="thrd__signal__handle_8h.html#aa942e37a598d563c1ca7568f9ab36e7d">thrd_signal_decide_t</a> decider, union <a class="el" href="unionthrd__raised__signal__info__value.html">thrd_raised_signal_info_value</a> value)</td></tr>
<tr class="memdesc:a7383ad2fc75d4ecc2243447bc6cd9318"><td class="mdescLeft">&#160;</td><td class="mdescRight">THREADSAFE USUALLY ASYNC-SIGNAL-SAFE Installs a thread-local signal guard for the calling thread, and calls the guarded function <code>guarded</code>.  <br /></td></tr>
<tr class="separator:a7383ad2fc75d4ecc2243447bc6cd9318"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e13ba50e7b490b8af9510faee081001" id="r_a1e13ba50e7b490b8af9510faee081001"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thrd__signal__handle_8h.html#a1e13ba50e7b490b8af9510faee081001">thrd_signal_raise</a> (int signo, void *raw_info, void *raw_context)</td></tr>
<tr class="memdesc:a1e13ba50e7b490b8af9510faee081001"><td class="mdescLeft">&#160;</td><td class="mdescRight">THREADSAFE USUALLY ASYNC-SIGNAL-SAFE Call OUR currently installed signal decider for a signal (POSIX), or raise a Win32 structured exception (Windows), returning false if we have no decider installed for that signal.  <br /></td></tr>
<tr class="separator:a1e13ba50e7b490b8af9510faee081001"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf62abc62563d3cae93aef2832aab513" id="r_acf62abc62563d3cae93aef2832aab513"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thrd__signal__handle_8h.html#acf62abc62563d3cae93aef2832aab513">modern_signals_install</a> (const sigset_t *guarded, int version)</td></tr>
<tr class="memdesc:acf62abc62563d3cae93aef2832aab513"><td class="mdescLeft">&#160;</td><td class="mdescRight">THREADSAFE Installs, and potentially enables, the global signal handlers for the signals specified by <code>guarded</code>. Each signal installed is threadsafe reference counted, so this is safe to call from multiple threads or instantiate multiple times.  <br /></td></tr>
<tr class="separator:acf62abc62563d3cae93aef2832aab513"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba236456e61a60ec7384294f3bb90858" id="r_aba236456e61a60ec7384294f3bb90858"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thrd__signal__handle_8h.html#aba236456e61a60ec7384294f3bb90858">modern_signals_uninstall</a> (void *i)</td></tr>
<tr class="memdesc:aba236456e61a60ec7384294f3bb90858"><td class="mdescLeft">&#160;</td><td class="mdescRight">THREADSAFE Uninstall a previously installed signal guard.  <br /></td></tr>
<tr class="separator:aba236456e61a60ec7384294f3bb90858"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b42041d834e5ab17987608b8c88b081" id="r_a5b42041d834e5ab17987608b8c88b081"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thrd__signal__handle_8h.html#a5b42041d834e5ab17987608b8c88b081">modern_signals_uninstall_system</a> (int version)</td></tr>
<tr class="memdesc:a5b42041d834e5ab17987608b8c88b081"><td class="mdescLeft">&#160;</td><td class="mdescRight">THREADSAFE Uninstall a previously system installed signal guard.  <br /></td></tr>
<tr class="separator:a5b42041d834e5ab17987608b8c88b081"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a139cb1953d5227e9886baef534f0a384" id="r_a139cb1953d5227e9886baef534f0a384"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thrd__signal__handle_8h.html#a139cb1953d5227e9886baef534f0a384">signal_decider_create</a> (const sigset_t *guarded, bool callfirst, <a class="el" href="thrd__signal__handle_8h.html#aa942e37a598d563c1ca7568f9ab36e7d">thrd_signal_decide_t</a> decider, union <a class="el" href="unionthrd__raised__signal__info__value.html">thrd_raised_signal_info_value</a> value)</td></tr>
<tr class="memdesc:a139cb1953d5227e9886baef534f0a384"><td class="mdescLeft">&#160;</td><td class="mdescRight">THREADSAFE NOT REENTRANT Create a global signal continuation decider. Threadsafe with respect to other calls of this function, but not reentrant i.e. modifying the global signal continuation decider registry whilst inside a global signal continuation decider is racy, and in any case definitely not async signal handler safe. Called after all thread local handling is exhausted. Note that what you can safely do in the decider function is extremely limited, only async signal safe functions may be called.  <br /></td></tr>
<tr class="separator:a139cb1953d5227e9886baef534f0a384"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6a5705693a0952071155ec75cb7b54c" id="r_ab6a5705693a0952071155ec75cb7b54c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thrd__signal__handle_8h.html#ab6a5705693a0952071155ec75cb7b54c">signal_decider_destroy</a> (void *decider)</td></tr>
<tr class="memdesc:ab6a5705693a0952071155ec75cb7b54c"><td class="mdescLeft">&#160;</td><td class="mdescRight">THREADSAFE NOT REENTRANT Destroy a global signal continuation decider. Threadsafe with respect to other calls of this function, but not reentrant i.e. do not call whilst inside a global signal continuation decider.  <br /></td></tr>
<tr class="separator:ab6a5705693a0952071155ec75cb7b54c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ab2e00b715ed9675faa57179d7502f5ab" name="ab2e00b715ed9675faa57179d7502f5ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2e00b715ed9675faa57179d7502f5ab">&#9670;&#160;</a></span>thrd_raised_signal_error_code_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int <a class="el" href="thrd__signal__handle_8h.html#ab2e00b715ed9675faa57179d7502f5ab">thrd_raised_signal_error_code_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Typedef to a system specific error code type. </p>

<p class="definition">Definition at line <a class="el" href="thrd__signal__handle_8h_source.html#l00096">96</a> of file <a class="el" href="thrd__signal__handle_8h_source.html">thrd_signal_handle.h</a>.</p>

</div>
</div>
<a id="aa942e37a598d563c1ca7568f9ab36e7d" name="aa942e37a598d563c1ca7568f9ab36e7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa942e37a598d563c1ca7568f9ab36e7d">&#9670;&#160;</a></span>thrd_signal_decide_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef bool(* thrd_signal_decide_t) (struct <a class="el" href="structthrd__raised__signal__info.html">thrd_raised_signal_info</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The type of the function called when a signal is raised. Returns true to continue guarded code, false to recover. </p>

<p class="definition">Definition at line <a class="el" href="thrd__signal__handle_8h_source.html#l00133">133</a> of file <a class="el" href="thrd__signal__handle_8h_source.html">thrd_signal_handle.h</a>.</p>

</div>
</div>
<a id="af73bf2bd205323f686362faec8b219de" name="af73bf2bd205323f686362faec8b219de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af73bf2bd205323f686362faec8b219de">&#9670;&#160;</a></span>thrd_signal_func_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef union <a class="el" href="unionthrd__raised__signal__info__value.html">thrd_raised_signal_info_value</a>( * thrd_signal_func_t) (union <a class="el" href="unionthrd__raised__signal__info__value.html">thrd_raised_signal_info_value</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The type of the guarded function. </p>

<p class="definition">Definition at line <a class="el" href="thrd__signal__handle_8h_source.html#l00096">96</a> of file <a class="el" href="thrd__signal__handle_8h_source.html">thrd_signal_handle.h</a>.</p>

</div>
</div>
<a id="ad30c0cc3cb61d6cfd75559cf9bdfdc84" name="ad30c0cc3cb61d6cfd75559cf9bdfdc84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad30c0cc3cb61d6cfd75559cf9bdfdc84">&#9670;&#160;</a></span>thrd_signal_recover_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef union <a class="el" href="unionthrd__raised__signal__info__value.html">thrd_raised_signal_info_value</a>( * thrd_signal_recover_t) (const struct <a class="el" href="structthrd__raised__signal__info.html">thrd_raised_signal_info</a> *)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The type of the function called to recover from a signal being raised in a guarded section. </p>

<p class="definition">Definition at line <a class="el" href="thrd__signal__handle_8h_source.html#l00096">96</a> of file <a class="el" href="thrd__signal__handle_8h_source.html">thrd_signal_handle.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="acf62abc62563d3cae93aef2832aab513" name="acf62abc62563d3cae93aef2832aab513"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf62abc62563d3cae93aef2832aab513">&#9670;&#160;</a></span>modern_signals_install()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void * modern_signals_install </td>
          <td>(</td>
          <td class="paramtype">const sigset_t *&#160;</td>
          <td class="paramname"><em>guarded</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>version</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>THREADSAFE Installs, and potentially enables, the global signal handlers for the signals specified by <code>guarded</code>. Each signal installed is threadsafe reference counted, so this is safe to call from multiple threads or instantiate multiple times. </p>
<p>If <code>guarded</code> is null, all the standard POSIX signals are used. <code>version</code> is reserved for future use, and should be zero.</p>
<h2><a class="anchor" id="autotoc_md0"></a>
POSIX only</h2>
<p>Any existing global signal handlers are replaced with a filtering signal handler, which checks if the current kernel thread has installed a signal guard, and if so executes the guard. If no signal guard has been installed for the current kernel thread, global signal continuation handlers are executed. If none claims the signal, the previously installed signal handler is called.</p>
<p>After the new signal handlers have been installed, the guarded signals are globally enabled for all threads of execution. Be aware that the handlers are installed with <code>SA_NODEFER</code> to avoid the need to perform an expensive syscall when a signal is handled. However this may also produce surprise e.g. infinite loops.</p>
<dl class="section warning"><dt>Warning</dt><dd>This class is threadsafe with respect to other concurrent executions of itself, but is NOT threadsafe with respect to other code modifying the global signal handlers. </dd></dl>

</div>
</div>
<a id="aba236456e61a60ec7384294f3bb90858" name="aba236456e61a60ec7384294f3bb90858"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba236456e61a60ec7384294f3bb90858">&#9670;&#160;</a></span>modern_signals_uninstall()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool modern_signals_uninstall </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>i</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>THREADSAFE Uninstall a previously installed signal guard. </p>

</div>
</div>
<a id="a5b42041d834e5ab17987608b8c88b081" name="a5b42041d834e5ab17987608b8c88b081"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b42041d834e5ab17987608b8c88b081">&#9670;&#160;</a></span>modern_signals_uninstall_system()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool modern_signals_uninstall_system </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>version</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>THREADSAFE Uninstall a previously system installed signal guard. </p>

</div>
</div>
<a id="a139cb1953d5227e9886baef534f0a384" name="a139cb1953d5227e9886baef534f0a384"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a139cb1953d5227e9886baef534f0a384">&#9670;&#160;</a></span>signal_decider_create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void * signal_decider_create </td>
          <td>(</td>
          <td class="paramtype">const sigset_t *&#160;</td>
          <td class="paramname"><em>guarded</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>callfirst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="thrd__signal__handle_8h.html#aa942e37a598d563c1ca7568f9ab36e7d">thrd_signal_decide_t</a>&#160;</td>
          <td class="paramname"><em>decider</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">union <a class="el" href="unionthrd__raised__signal__info__value.html">thrd_raised_signal_info_value</a>&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>THREADSAFE NOT REENTRANT Create a global signal continuation decider. Threadsafe with respect to other calls of this function, but not reentrant i.e. modifying the global signal continuation decider registry whilst inside a global signal continuation decider is racy, and in any case definitely not async signal handler safe. Called after all thread local handling is exhausted. Note that what you can safely do in the decider function is extremely limited, only async signal safe functions may be called. </p>
<dl class="section return"><dt>Returns</dt><dd>An opaque pointer to the registered decider. <code>NULL</code> if <code>malloc</code> failed. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">guarded</td><td>The set of signals to be guarded against. </td></tr>
    <tr><td class="paramname">callfirst</td><td>True if this decider should be called before any other. Otherwise call order is in the order of addition. </td></tr>
    <tr><td class="paramname">decider</td><td>A decider function, which must return <code>true</code> if execution is to resume, <code>false</code> if the next decider function should be called. </td></tr>
    <tr><td class="paramname">value</td><td>A user supplied value to set in the <code>raised_signal_info</code> passed to the decider callback. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab6a5705693a0952071155ec75cb7b54c" name="ab6a5705693a0952071155ec75cb7b54c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6a5705693a0952071155ec75cb7b54c">&#9670;&#160;</a></span>signal_decider_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool signal_decider_destroy </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>decider</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>THREADSAFE NOT REENTRANT Destroy a global signal continuation decider. Threadsafe with respect to other calls of this function, but not reentrant i.e. do not call whilst inside a global signal continuation decider. </p>
<dl class="section return"><dt>Returns</dt><dd>True if recognised and thus removed. </dd></dl>

</div>
</div>
<a id="a7383ad2fc75d4ecc2243447bc6cd9318" name="a7383ad2fc75d4ecc2243447bc6cd9318"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7383ad2fc75d4ecc2243447bc6cd9318">&#9670;&#160;</a></span>thrd_signal_invoke()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">union <a class="el" href="unionthrd__raised__signal__info__value.html">thrd_raised_signal_info_value</a> thrd_signal_invoke </td>
          <td>(</td>
          <td class="paramtype">const sigset_t *&#160;</td>
          <td class="paramname"><em>signals</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="thrd__signal__handle_8h.html#af73bf2bd205323f686362faec8b219de">thrd_signal_func_t</a>&#160;</td>
          <td class="paramname"><em>guarded</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="thrd__signal__handle_8h.html#ad30c0cc3cb61d6cfd75559cf9bdfdc84">thrd_signal_recover_t</a>&#160;</td>
          <td class="paramname"><em>recovery</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="thrd__signal__handle_8h.html#aa942e37a598d563c1ca7568f9ab36e7d">thrd_signal_decide_t</a>&#160;</td>
          <td class="paramname"><em>decider</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">union <a class="el" href="unionthrd__raised__signal__info__value.html">thrd_raised_signal_info_value</a>&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>THREADSAFE USUALLY ASYNC-SIGNAL-SAFE Installs a thread-local signal guard for the calling thread, and calls the guarded function <code>guarded</code>. </p>
<dl class="section return"><dt>Returns</dt><dd>The value returned by <code>guarded</code>, or <code>recovery</code>. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">signals</td><td>The set of signals to guard against. </td></tr>
    <tr><td class="paramname">guarded</td><td>A function whose execution is to be guarded against signal raises. </td></tr>
    <tr><td class="paramname">recovery</td><td>A function to be called if a signal is raised. </td></tr>
    <tr><td class="paramname">decider</td><td>A function to be called to decide whether to recover from the signal and continue the execution of the guarded routine, or to abort and call the recovery routine. </td></tr>
    <tr><td class="paramname">value</td><td>A value to supply to the guarded routine.</td></tr>
  </table>
  </dd>
</dl>
<p>By "usually async signal safe" we mean that if any function from this library has been called from the called from the calling thread, this is async signal safe. If you need to set up this library for a calling thread without doing anything else, calling <code>thrd_signal_raise(0, nullptr, nullptr)</code>, this will ensure the calling thread's thread local state is set up and return immediately doing nothing else. </p>

</div>
</div>
<a id="a1e13ba50e7b490b8af9510faee081001" name="a1e13ba50e7b490b8af9510faee081001"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e13ba50e7b490b8af9510faee081001">&#9670;&#160;</a></span>thrd_signal_raise()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool thrd_signal_raise </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>signo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>raw_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>raw_context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>THREADSAFE USUALLY ASYNC-SIGNAL-SAFE Call OUR currently installed signal decider for a signal (POSIX), or raise a Win32 structured exception (Windows), returning false if we have no decider installed for that signal. </p>
<p>Note that on POSIX, we fetch OUR currently installed signal decider and call it directly. This allows us to supply custom <code>raw_info</code> and <code>raw_context</code>. Each decider in our chain will be invoked in turn until we reach whatever the signal handler was when this library was first initialised, and we hand off to that handler. If that handler was defaulted and the default handling is not to ignore, we reset the handler installation and execute <code>pthread_kill(pthread_self(), signo)</code> in order to invoke the default handling.</p>
<p>It is important to note that this call does not raise signals itself except in that final handling step as just described. Therefore, if your code overwrites the signal handlers installed by this library with a custom handler, and you wish to pass on signal handling to this library, this is the right API to call to do that.</p>
<p>On Windows, Win32 structured exceptions are capable of being used directly and so we do on that platform always call <code>RaiseException()</code>.</p>
<p>By "usually async signal safe" we mean that if any function from this library has been called from the called from the calling thread, this is async signal safe. If you need to set up this library for a calling thread without doing anything else, specify zero for <code>signo</code>, this will ensure the calling thread's thread local state is set up and return immediately doing nothing else. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_2c055be1786a4e55d30495603f0570a8.html">wg14_signals</a></li><li class="navelem"><a class="el" href="thrd__signal__handle_8h.html">thrd_signal_handle.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
